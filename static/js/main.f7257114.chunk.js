(this.webpackJsonpwebcrypto=this.webpackJsonpwebcrypto||[]).push([[0],{22:function(e,t,n){"use strict";function r(e,t){var n=new Blob([e],{type:"text/plain"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=t,r.click(),r.remove()}function c(e){navigator.clipboard&&navigator.clipboard.writeText(e)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}))},48:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(11),c=n(4),a=n(0),i=n(52),o=n(39),l=n(82),s=n(83),u=n(76),d=n(80),p=n(81),j=n(22);function b(t){var n=Object(a.useState)(""),b=Object(r.a)(n,2),h=b[0],f=b[1],y=Object(a.useState)(""),O=Object(r.a)(y,2),x=O[0],v=O[1],m=Object(a.useState)(""),w=Object(r.a)(m,2),g=w[0],k=w[1],E=Object(a.useState)(!1),C=Object(r.a)(E,2),P=C[0],K=C[1];return Object(a.useEffect)((function(){v(P?"Invalid input or key":"")}),[P]),Object(c.jsx)(u.a,{variant:"outlined",children:Object(c.jsx)(d.a,{children:Object(c.jsxs)(o.a,{className:"vspacing",children:[Object(c.jsxs)(i.a,{variant:"h5",component:"h2",title:null!==t.keyPair?"Ready to decrypt":"Not ready to decrypt: Key is not set",children:["\ud83d\udd13Decrypt",null!==t.keyPair?" \ud83d\udfe2":" \ud83d\udfe0"]}),Object(c.jsx)(o.a,{children:Object(c.jsx)(l.a,{multiline:!0,spellCheck:!1,rows:3,onChange:function(n){var r=null===n||void 0===n?void 0:n.target.value;f(r);var c=t.keyPair;if(""===r)return k(""),void K(!1);null!==c&&window.crypto.subtle.decrypt("RSA-OAEP",c.privateKey,e.from(r,"base64")).then((function(e){var t=new TextDecoder("utf-8").decode(new Uint8Array(e));k(t),K(!1)})).catch((function(e){console.log(e.name),k(""),K(!0)}))},variant:"outlined",fullWidth:!0,placeholder:"Encrypted Text",error:P,helperText:x,children:h})}),Object(c.jsx)(o.a,{children:Object(c.jsx)(i.a,{className:"wrap",children:g})}),Object(c.jsx)(o.a,{display:"flex",justifyContent:"flex-end",children:Object(c.jsx)(p.a,{children:Object(c.jsx)(s.a,{title:"Copy decrypted text",disabled:""===g,onClick:function(e){return Object(j.b)(g)},variant:"outlined",children:"Copy"})})})]})})})}}).call(this,n(70).Buffer)},65:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var r=n(4),c=n(0),a=n.n(c),i=n(9),o=n.n(i),l=(n(65),n(11)),s=n(52),u=n(114),d=n(111),p=n(49),j=n(112),b=n(113),h=n(13),f=n.n(h),y=n(20),O=n(39),x=n(83),v=n(76),m=n(80),w=n(81),g=n(22);function k(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,c=e.length;r<c;r++)n[r]=e.charCodeAt(r);return t}function E(e){var t=new Uint8Array(e);return String.fromCharCode.apply(null,t)}function C(e,t,n){var r=e.indexOf(t),c=e.indexOf(n);return e.substring(r+t.length,c)}function P(e){return K.apply(this,arguments)}function K(){return(K=Object(y.a)(f.a.mark((function e(t){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"-----BEGIN PRIVATE KEY-----","-----END PRIVATE KEY-----",n=C(t,"-----BEGIN PRIVATE KEY-----","-----END PRIVATE KEY-----"),r=window.atob(n),c=k(r),e.abrupt("return",window.crypto.subtle.importKey("pkcs8",c,{name:"RSA-OAEP",hash:"SHA-256"},!0,["decrypt"]));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return A.apply(this,arguments)}function A(){return(A=Object(y.a)(f.a.mark((function e(t){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"-----BEGIN PUBLIC KEY-----","-----END PUBLIC KEY-----",n=C(t,"-----BEGIN PUBLIC KEY-----","-----END PUBLIC KEY-----"),r=window.atob(n),c=k(r),e.abrupt("return",window.crypto.subtle.importKey("spki",c,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return I.apply(this,arguments)}function I(){return(I=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([P(t),S(t)]).then((function(e){return{privateKey:e[0],publicKey:e[1]}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(y.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=document.createElement("input");n.type="file",n.accept="text/plain",n.multiple=!1,n.onchange=function(r){var c=n.files;if(null!==c&&c.length>0){var a=new FileReader;a.onload=function(){N(a.result).then((function(t){return e(t)})).catch((function(){return t()}))},a.readAsText(c[0])}else t()},n.click()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){return"-----BEGIN ".concat(t,"-----\n").concat(e,"\n-----END ").concat(t,"-----")}function T(e,t,n){return L.apply(this,arguments)}function L(){return(L=Object(y.a)(f.a.mark((function e(t,n,r){var c,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey(n,t);case 2:return c=e.sent,a=E(c),i=window.btoa(a),e.abrupt("return",B(i,r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T(t,"pkcs8","PRIVATE KEY"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return G.apply(this,arguments)}function G(){return(G=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T(t,"spki","PUBLIC KEY"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return window.crypto.subtle.digest("SHA-256",k(e)).then((function(e){return function(e){var t=Array.from(new Uint8Array(e)).map((function(e){return e+127991}));return String.fromCodePoint.apply(null,t)}(e)}))}function W(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],i=n[1],o=Object(c.useState)(""),u=Object(l.a)(o,2),d=u[0],p=u[1],j=Object(c.useState)("No Key"),b=Object(l.a)(j,2),h=b[0],f=b[1],y=Object(c.useState)("No Key"),k=Object(l.a)(y,2),E=k[0],C=k[1],P=Object(c.useState)(!1),K=Object(l.a)(P,2),S=K[0],A=K[1];function I(t){Promise.all([U(t.privateKey),D(t.publicKey)]).then((function(n){var r=Object(l.a)(n,2),c=r[0],a=r[1];localStorage.setItem("keyPair",a+"\n"+c),Promise.all([V(c),V(a)]).then((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];i(c),p(a),f(n),C(r)})),A(!0),e.onKeyPairChange(t)}))}return function(){var e=localStorage.getItem("keyPair");null!==e&&""===a&&""===d&&(console.log("Load key pair from localStorage"),N(e).then((function(e){I(e)})))}(),Object(r.jsx)(v.a,{variant:"outlined",children:Object(r.jsx)(m.a,{children:Object(r.jsxs)(O.a,{className:"vspacing",children:[Object(r.jsx)(s.a,{variant:"h5",component:"h2",children:"\ud83d\udddd\ufe0fYour Key Pair"}),Object(r.jsxs)(O.a,{display:"flex",justifyContent:"space-between",alignItems:"stretch",children:[Object(r.jsx)(O.a,{width:"30%",children:Object(r.jsxs)(v.a,{variant:"outlined",children:[Object(r.jsxs)(m.a,{children:[Object(r.jsx)(s.a,{variant:"body1",component:"h3",children:"Public"}),Object(r.jsx)(s.a,{variant:"body2",color:S?"textPrimary":"textSecondary",component:"p",className:"ellipsis",onClick:function(e){return e.target.classList.toggle("ellipsis")},title:S?"Key finterprint. Click to open/close":"No key is set",children:E})]}),Object(r.jsx)(O.a,{display:"flex",justifyContent:"flex-end",children:Object(r.jsx)(w.a,{children:Object(r.jsx)(x.a,{title:"Copy private key",disabled:!S,onClick:function(){return Object(g.b)(d)},size:"small",variant:"outlined",children:"Copy"})})})]})}),Object(r.jsx)(O.a,{width:"30%",children:Object(r.jsx)(v.a,{variant:"outlined",children:Object(r.jsxs)(m.a,{children:[Object(r.jsx)(s.a,{variant:"body1",component:"h3",children:"Private"}),Object(r.jsx)(s.a,{variant:"body2",color:S?"textPrimary":"textSecondary",component:"p",className:"ellipsis",onClick:function(e){return e.target.classList.toggle("ellipsis")},title:S?"Key finterprint. Click to open/close":"No key is set",children:h})]})})}),Object(r.jsxs)(O.a,{width:"30%",display:"flex",flexDirection:"column",justifyContent:"space-around",children:[Object(r.jsx)(x.a,{onClick:function(){window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]).then((function(e){(function(e){return void 0!==e.privateKey})(e)&&(console.log("New key pair is generated."),A(!0),I(e))}))},variant:"outlined",children:"Generate Key Pair"}),Object(r.jsx)(x.a,{onClick:function(){(function(){return R.apply(this,arguments)})().then((function(e){I(e)})).catch((function(e){console.log(e)}))},variant:"outlined",children:"Load Key Pair"}),Object(r.jsx)(x.a,{disabled:!S,variant:"outlined",onClick:function(){return Object(g.a)(d+"\n"+a,"KeyPair.txt")},children:"Save Key Pair"})]})]})]})})})}var H=n(82);function J(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(""),o=Object(l.a)(i,2),u=o[0],d=o[1],p=Object(c.useState)(!1),j=Object(l.a)(p,2),b=j[0],h=j[1],f=Object(c.useState)(""),y=Object(l.a)(f,2),k=y[0],C=y[1],P=Object(c.useState)(""),K=Object(l.a)(P,2),A=K[0],N=K[1];return Object(c.useEffect)((function(){d(b?"Invalid public key":"")}),[b]),Object(r.jsx)(v.a,{variant:"outlined",children:Object(r.jsx)(m.a,{children:Object(r.jsxs)(O.a,{className:"vspacing",children:[Object(r.jsx)(s.a,{variant:"h5",component:"h2",children:"\ud83d\udd12Encrypt"}),Object(r.jsx)(O.a,{children:Object(r.jsx)(H.a,{error:b,spellCheck:!1,multiline:!0,rows:4,onChange:function(e){var t=null===e||void 0===e?void 0:e.target.value;a(t),""===t?h(!1):S(t).then((function(e){h(!1)})).catch((function(e){h(!0)}))},variant:"outlined",fullWidth:!0,placeholder:"Receivers Public Key",helperText:u,children:n})}),Object(r.jsx)(O.a,{children:Object(r.jsx)(H.a,{multiline:!0,spellCheck:!1,rows:3,variant:"outlined",onChange:function(e){var t=null===e||void 0===e?void 0:e.target.value;C(t),""!==t?""===n||b||S(n).then((function(e){var n=(new TextEncoder).encode(t);window.crypto.subtle.encrypt({name:"RSA-OAEP"},e,n).then((function(e){var t=E(e),n=window.btoa(t);N(n)})).catch((function(e){return console.log(e)}))})):N("")},fullWidth:!0,placeholder:"Text to encrypt",children:k})}),Object(r.jsx)(O.a,{children:Object(r.jsx)(s.a,{className:"wrap",children:A})}),Object(r.jsx)(O.a,{display:"flex",justifyContent:"flex-end",children:Object(r.jsx)(w.a,{children:Object(r.jsx)(x.a,{title:"Copy encrypted text",disabled:""===A,onClick:function(e){return Object(g.b)(A)},variant:"outlined",children:"Copy"})})})]})})})}var M=n(48);var z=function(){var e=Object(d.a)("(prefers-color-scheme: dark)"),t=Object(c.useState)(null),n=Object(l.a)(t,2),i=n[0],o=n[1],h=a.a.useMemo((function(){return Object(p.a)({palette:{type:e?"dark":"light"}})}),[e]);return Object(r.jsxs)(j.a,{theme:h,children:[Object(r.jsx)(b.a,{}),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("header",{className:"App-header"}),Object(r.jsxs)(u.a,{maxWidth:"md",className:"vspacing",children:[Object(r.jsx)(s.a,{component:"h1",variant:"h2",children:"Webcrypto"}),Object(r.jsx)(W,{onKeyPairChange:function(e){return o(e)}}),Object(r.jsx)(J,{}),Object(r.jsx)(M.a,{keyPair:i})]})]})]})};o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(z,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.f7257114.chunk.js.map