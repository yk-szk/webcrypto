(this.webpackJsonpwebcrypto=this.webpackJsonpwebcrypto||[]).push([[0],{22:function(e,t,n){"use strict";function r(e,t){var n=new Blob([e],{type:"text/plain"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=t,r.click(),r.remove()}function c(e){navigator.clipboard&&navigator.clipboard.writeText(e)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}))},48:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(11),c=n(4),a=n(0),i=n(50),o=n(38),u=n(77),l=n(78),s=n(22);function p(t){var n=Object(a.useState)(""),p=Object(r.a)(n,2),d=p[0],j=p[1],f=Object(a.useState)(""),b=Object(r.a)(f,2),h=b[0],y=b[1],O=Object(a.useState)(""),x=Object(r.a)(O,2),v=x[0],w=x[1],m=Object(a.useState)(!1),g=Object(r.a)(m,2),k=g[0],E=g[1];return Object(a.useEffect)((function(){y(k?"Invalid input or key":"")}),[k]),Object(c.jsxs)(o.a,{className:"vspacing",children:[Object(c.jsxs)(i.a,{title:null!==t.keyPair?"Ready to decrypt":"Key is not set",children:["Decrypt",null!==t.keyPair?" \ud83d\udfe2":" \ud83d\udfe0"]}),Object(c.jsx)(o.a,{children:Object(c.jsx)(u.a,{multiline:!0,spellCheck:!1,rows:3,onChange:function(n){var r=null===n||void 0===n?void 0:n.target.value;j(r);var c=t.keyPair;if(""===r)return w(""),void E(!1);null!==c&&window.crypto.subtle.decrypt("RSA-OAEP",c.privateKey,e.from(r,"base64")).then((function(e){var t=new TextDecoder("utf-8").decode(new Uint8Array(e));w(t),E(!1)})).catch((function(e){console.log(e.name),w(""),E(!0)}))},variant:"outlined",fullWidth:!0,placeholder:"Encrypted Text",error:k,helperText:h,children:d})}),Object(c.jsx)(o.a,{children:Object(c.jsx)(i.a,{className:"wrap",children:v})}),Object(c.jsx)(o.a,{display:"flex",justifyContent:"flex-end",children:Object(c.jsx)(l.a,{title:"Copy decrypted text",disabled:""===v,onClick:function(e){return Object(s.b)(v)},variant:"outlined",children:"Copy"})})]})}}).call(this,n(69).Buffer)},64:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var r=n(4),c=n(0),a=n.n(c),i=n(9),o=n.n(i),u=(n(64),n(11)),l=n(50),s=n(110),p=n(107),d=n(49),j=n(108),f=n(109),b=n(13),h=n.n(b),y=n(20),O=n(38),x=n(78),v=n(22);function w(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,c=e.length;r<c;r++)n[r]=e.charCodeAt(r);return t}function m(e){var t=new Uint8Array(e);return String.fromCharCode.apply(null,t)}function g(e,t,n){var r=e.indexOf(t),c=e.indexOf(n);return e.substring(r+t.length,c)}function k(e){return E.apply(this,arguments)}function E(){return(E=Object(y.a)(h.a.mark((function e(t){var n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"-----BEGIN PRIVATE KEY-----","-----END PRIVATE KEY-----",n=g(t,"-----BEGIN PRIVATE KEY-----","-----END PRIVATE KEY-----"),r=window.atob(n),c=w(r),e.abrupt("return",window.crypto.subtle.importKey("pkcs8",c,{name:"RSA-OAEP",hash:"SHA-256"},!0,["decrypt"]));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return P.apply(this,arguments)}function P(){return(P=Object(y.a)(h.a.mark((function e(t){var n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"-----BEGIN PUBLIC KEY-----","-----END PUBLIC KEY-----",n=g(t,"-----BEGIN PUBLIC KEY-----","-----END PUBLIC KEY-----"),r=window.atob(n),c=w(r),e.abrupt("return",window.crypto.subtle.importKey("spki",c,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return A.apply(this,arguments)}function A(){return(A=Object(y.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([k(t),C(t)]).then((function(e){return{privateKey:e[0],publicKey:e[1]}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=document.createElement("input");n.type="file",n.accept="text/plain",n.multiple=!1,n.onchange=function(r){var c=n.files;if(null!==c&&c.length>0){var a=new FileReader;a.onload=function(){S(a.result).then((function(t){return e(t)})).catch((function(){return t()}))},a.readAsText(c[0])}else t()},n.click()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return"-----BEGIN ".concat(t,"-----\n").concat(e,"\n-----END ").concat(t,"-----")}function N(e,t,n){return R.apply(this,arguments)}function R(){return(R=Object(y.a)(h.a.mark((function e(t,n,r){var c,a,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey(n,t);case 2:return c=e.sent,a=m(c),i=window.btoa(a),e.abrupt("return",I(i,r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return T.apply(this,arguments)}function T(){return(T=Object(y.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N(t,"pkcs8","PRIVATE KEY"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return U.apply(this,arguments)}function U(){return(U=Object(y.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N(t,"spki","PUBLIC KEY"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return window.crypto.subtle.digest("SHA-256",w(e)).then((function(e){return function(e){var t=Array.from(new Uint8Array(e)).map((function(e){return e+127991}));return String.fromCodePoint.apply(null,t)}(e)}))}function D(e){var t=Object(c.useState)(""),n=Object(u.a)(t,2),i=n[0],o=n[1],s=Object(c.useState)(""),p=Object(u.a)(s,2),d=p[0],j=p[1],f=Object(c.useState)(""),b=Object(u.a)(f,2),h=b[0],y=b[1],w=Object(c.useState)(""),m=Object(u.a)(w,2),g=m[0],k=m[1],E=Object(c.useState)(!1),C=Object(u.a)(E,2),P=C[0],A=C[1];function I(t){Promise.all([B(t.privateKey),L(t.publicKey)]).then((function(n){var r=Object(u.a)(n,2),c=r[0],a=r[1];localStorage.setItem("keyPair",a+"\n"+c),Promise.all([Y(c),Y(a)]).then((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];o(c),j(a),y(n),k(r)})),A(!0),e.onKeyPairChange(t)}))}return function(){var e=localStorage.getItem("keyPair");null!==e&&""===h&&""===g&&(console.log("Load key pair from localStorage"),S(e).then((function(e){I(e)})))}(),Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)(l.a,{children:"Your keys"}),Object(r.jsxs)(O.a,{display:"flex",justifyContent:"space-between",children:[Object(r.jsxs)(O.a,{width:"30%",children:[Object(r.jsx)(l.a,{children:"Public"}),Object(r.jsx)(l.a,{className:"ellipsis",onClick:function(e){return e.target.classList.toggle("ellipsis")},title:"Key finterprint. Click to open/close",children:g}),Object(r.jsx)(O.a,{display:"flex",justifyContent:"flex-end",children:Object(r.jsx)(x.a,{title:"Copy private key",disabled:!P,variant:"outlined",onClick:function(){return Object(v.b)(d)},children:"Copy"})})]}),Object(r.jsxs)(O.a,{width:"30%",children:[Object(r.jsx)(l.a,{children:"Private"}),Object(r.jsx)(l.a,{className:"ellipsis",onClick:function(e){return e.target.classList.toggle("ellipsis")},title:"Key finterprint. Click to open/close",children:h})]}),Object(r.jsxs)(O.a,{width:"30%",display:"flex",flexDirection:"column",justifyContent:"space-around",children:[Object(r.jsx)(x.a,{onClick:function(){window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]).then((function(e){(function(e){return void 0!==e.privateKey})(e)&&(console.log("New key pair is generated."),A(!0),I(e))}))},variant:"outlined",children:"Generate Key Pair"}),Object(r.jsx)(x.a,{onClick:function(){(function(){return K.apply(this,arguments)})().then((function(e){I(e)})).catch((function(e){console.log(e)}))},variant:"outlined",children:"Load Key Pair"}),Object(r.jsx)(x.a,{disabled:!P,variant:"outlined",onClick:function(){return Object(v.a)(d+"\n"+i,"KeyPair.txt")},children:"Save Key Pair"})]})]})]})}var G=n(77);function V(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(""),o=Object(u.a)(i,2),s=o[0],p=o[1],d=Object(c.useState)(!1),j=Object(u.a)(d,2),f=j[0],b=j[1],h=Object(c.useState)(""),y=Object(u.a)(h,2),w=y[0],g=y[1],k=Object(c.useState)(""),E=Object(u.a)(k,2),P=E[0],S=E[1];return Object(c.useEffect)((function(){p(f?"Invalid public key":"")}),[f]),Object(r.jsxs)(O.a,{className:"vspacing",children:[Object(r.jsx)(l.a,{children:"Encrypt"}),Object(r.jsx)(O.a,{children:Object(r.jsx)(G.a,{error:f,spellCheck:!1,multiline:!0,rows:4,onChange:function(e){var t=null===e||void 0===e?void 0:e.target.value;a(t),""===t?b(!1):C(t).then((function(e){b(!1)})).catch((function(e){b(!0)}))},variant:"outlined",fullWidth:!0,placeholder:"Receivers Public Key",helperText:s,children:n})}),Object(r.jsx)(O.a,{children:Object(r.jsx)(G.a,{multiline:!0,spellCheck:!1,rows:3,variant:"outlined",onChange:function(e){var t=null===e||void 0===e?void 0:e.target.value;g(t),""!==t?""===n||f||C(n).then((function(e){var n=(new TextEncoder).encode(t);window.crypto.subtle.encrypt({name:"RSA-OAEP"},e,n).then((function(e){var t=m(e),n=window.btoa(t);S(n)})).catch((function(e){return console.log(e)}))})):S("")},fullWidth:!0,placeholder:"Text to encrypt",children:w})}),Object(r.jsx)(O.a,{children:Object(r.jsx)(l.a,{className:"wrap",children:P})}),Object(r.jsx)(O.a,{display:"flex",justifyContent:"flex-end",children:Object(r.jsx)(x.a,{title:"Copy encrypted text",disabled:""===P,onClick:function(e){return Object(v.b)(P)},variant:"outlined",children:"Copy"})})]})}var W=n(48);var H=function(){var e=Object(p.a)("(prefers-color-scheme: dark)"),t=Object(c.useState)(null),n=Object(u.a)(t,2),i=n[0],o=n[1],b=a.a.useMemo((function(){return Object(d.a)({palette:{type:e?"dark":"light"}})}),[e]);return Object(r.jsxs)(j.a,{theme:b,children:[Object(r.jsx)(f.a,{}),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("header",{className:"App-header"}),Object(r.jsxs)(s.a,{maxWidth:"md",className:"vspacing",children:[Object(r.jsx)(l.a,{component:"h1",variant:"h2",children:"Webcrypto"}),Object(r.jsx)(D,{onKeyPairChange:function(e){return o(e)}}),Object(r.jsx)(V,{}),Object(r.jsx)(W.a,{keyPair:i})]})]})]})};o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(H,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.1c70ceb8.chunk.js.map